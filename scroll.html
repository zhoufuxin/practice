<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>自制滚动条(未完善)</title>
  <style type="text/css">
  * {
    padding: 0;
    margin: 0;
    border: 0;
    box-sizing: border-box;
  }

  div {
       -moz-user-select:none;
    -webkit-user-select:none;
            user-select:none; 
  }

  .clearfix:before, .clearfix:after {
    display: table;
    content: "";
  }

  .clearfix:after {
    clear: both;
  }

  .clearfix {
    *zoom: 1;
  }

  body {
  }

  .teacher-show {
    width: 800px;
    height: 400px;
    margin: 0 auto;
  }

  .main {
    height: 100%;
    width: 99.2%;
    overflow: hidden;
    float: left;
  }

  .teacher-show .content {
    word-break: break-word;
  }

  .teacher-show .scroll-bar {
    float: right;

    height: 100%;
    width: 0.8%;
    background-color: rgb(219, 227, 236);
    border-radius: 5px;
  }

  .scroll-bar .scroll-current {
    width: 100%;
    background-color: rgb(126, 153, 179);
    height: 20%;
    position: relative;
    border-radius: 5px;
  }
  </style>
</head>
<body>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <div class="teacher-show clearfix">
    <div id="main" class="main">
      <div id="teacher-content" class="content">
        111111111111<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        111111111hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world hello world 11111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        123456<br/>
        123456<br/>
        123456<br/> 
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        11111111111111111111<br/>
        11111111111112345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345615612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345612345611111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        11111111111111111111<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        123456<br/>
        11111111111111111111<br/>
      </div>
    </div>
    <div class="scroll-bar">
      <div id="scroll-current" class="scroll-current"></div>
    </div>
  </div>
  
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
<script type="text/javascript">
window.onload = function() {
  var main = document.getElementById("main");
  var scroll = document.getElementById("scroll-current");

  eventUtil.addHandler(main, "mousewheel", function(e) {
    e = eventUtil.getEvent(e);
    var value = this.scrollTop;

    if (e.wheelDelta && e.wheelDelta < 0 
      || e.detail && e.detail > 0) {
      value += 120;
    } else if (e.wheelDelta && e.wheelDelta > 0 
      || e.detail && e.detail < 0) {
      value -= 120;
    }
    
    if ( value <= 0 ) {
      this.scrollTop = 0;
    } else if ( value >= (this.scrollHeight-this.offsetHeight) ) {
      this.scrollTop = this.scrollHeight-this.offsetHeight;
    } else {
      this.scrollTop = value;
      eventUtil.stopPropagation(e);
      eventUtil.preventDefault(e);
    }

    scroll.style.top = (this.scrollTop / this.scrollHeight) * 100 +"%";
  });

  var prevY = 0;
  var prevScrollTop = 0;

  eventUtil.addHandler(scroll, "mousedown", function(e) {
    e = eventUtil.getEvent(e);
    prevY = e.clientY;
    prevScrollTop = main.scrollTop;
    eventUtil.addHandler(document, "mousemove", scrollMouseHandler);

    //main.scrollTop += 10;
    //scroll.style.top = (main.scrollTop / main.scrollHeight) * 100 +"%";
  });

  eventUtil.addHandler(document, "mouseup", function(e) {
    eventUtil.removeHandler(document, "mousemove", scrollMouseHandler);
  });

  function scrollMouseHandler(e) {
    e = eventUtil.getEvent(e);
    var currY = e.clientY;
    var offsetY = currY - prevY;
    var value = prevScrollTop + main.scrollHeight * offsetY / main.offsetHeight;
    
    if ( value <= 0 ) {
      main.scrollTop = 0;
    } else if ( value >= (main.scrollHeight-main.offsetHeight) ) {
      main.scrollTop = main.scrollHeight-main.offsetHeight;
    } else {
      main.scrollTop = value;
      eventUtil.stopPropagation(e);
      eventUtil.preventDefault(e);
    }

    //main.scrollTop += main.scrollHeight * e.movementY / main.offsetHeight;
    scroll.style.top = (main.scrollTop / main.scrollHeight) * 100 +"%";
  }

  scroll.style.height = (main.offsetHeight / main.scrollHeight) * 100 +"%";
};

var eventUtil = {
  addHandler : function(element, type, handler) {
    if (type == "input") {
      if (element.addEventListener) {
        element.addEventListener(type, handler, false);
      } else if (element.attachEvent) {
        element.attachEvent('onpropertychange', handler);
      } else {
        element['onpropertychange'] = handler;
      }
      return;
    } else if (type == "mousewheel") {
      if (element.onmousewheel === undefined) {
        element.addEventListener("DOMMouseScroll", handler, false);
      } else {
        element["onmousewheel"] = handler;
      }
    } else {
      if (element.addEventListener) {
        element.addEventListener(type, handler, false);
      } else if (element.attachEvent) {
        element.attachEvent('on' + type, handler);
      } else {
        element['on' + type] = handler;
      }
    }
  },
  removeHandler : function(element, type, handler) {
    if (type == "input") {
      if (element.removeEventListener) {
        element.removeEventListener(type, handler, false);
      } else if (element.detachEvent) {
        element.detachEvent('onpropertychange', handler);
      } else {
        element['onpropertychange'] = null;
      }
      return;
    } else if (type == "mousewheel") {
      if (element.onmousewheel === undefined) {
        element.removeEventListener("DOMMouseScroll", handler, false);
      } else {
        element["onmousewheel"] = null;
      }
    } else {
      if (element.removeEventListener) {
        element.removeEventListener(type, handler, false);
      } else if (element.detachEvent) {
        element.detachEvent('on' + type, handler);
      } else {
        element['on' + type] = null;
      }
    }
  },
  getEvent : function(event) {
    return event ? event : window.event;
  },
  getType : function(event) {
    return event.type;
  },
  getElement : function(event) {
    return event.target || event.srcElement;
  },
  stopPropagation : function(event) {
    if (event.stopPropagation) {
      event.stopPropagation();
    } else {
      event.cancelBubble = true;
    }
  },
  preventDefault : function(event) {
    if (event.preventDefault) {
      event.preventDefault();
    } else {
      event.returnValue = false;
    }
  }
};
</script>
</body>
</html>